"use strict";function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),LoginForm=function(){function e(r){_classCallCheck(this,e),this.formCurrent=document.forms[r]}return _createClass(e,[{key:"getData",value:function(){var e={};if(void 0!==this.formCurrent)for(var r=this.formCurrent.elements.length,t=0;t<r;t++){var n=this.formCurrent.elements[t];"INPUT"===n.nodeName.toUpperCase()&&(e[n.name]=$.trim(n.value))}return e}},{key:"setData",value:function(e){var r=["fio","email","phone"];if(void 0!==this.formCurrent&&"object"===(void 0===e?"undefined":_typeof(e))&&!$.isEmptyObject(e)){var t=new Set(r);for(var n in e)e.hasOwnProperty(n)&&t.has(n)&&(this.formCurrent.elements[n].value=e[n])}}},{key:"validate",value:function(){var e=this;if(void 0!==this.formCurrent){var r=function(e,r){$("#"+e.id).addClass("error").after('<span class="pure-form-message-inline text-error">'+r+"</span>"),t=!1,n.push(e.name)},t=!0,n=[];return function(){var r=$("#"+e.formCurrent.id);r.find(".text-error ").remove(),r.find(".error").removeClass("error")}(),function(){var t=e.formCurrent.elements.fio;t.value?3===$.trim(t.value).split(" ").length?/^[А-яёЁ ]+$/i.test(t.value)||r(t,"В ФИО допускаются только русские буквы!"):r(t,"ФИО должно быть ровно 3 слова!"):r(t,"Это поле должно быть заполенно!")}(),function(){var t=e.formCurrent.elements.email;t.value?/^([\w\._]+)@(ya.ru|yandex.ru|yandex.ua|yandex.by|yandex.kz|yandex.com)$/i.test(t.value)||r(t,"Email должен быть из домена Яндекса!"):r(t,"Это поле должно быть заполенно!")}(),function(){var t=e.formCurrent.elements.phone;t.value?/^\+7\(\d{3}\)\d{3}-\d{2}-\d{2}$/i.test(t.value)?t.value.match(/\d/g).reduce(function(e,r){return e+ +r},0)>30&&r(t,"Сумма цифр телефона превышает 30"):r(t,"Формат телефона +7(XXX)XXX-XX-XX!"):r(t,"Это поле должно быть заполенно!")}(),{isValid:t,errorFields:n}}}},{key:"submit",value:function(){var e=this,r=function(e,r){$("#resultContainer").removeClass().addClass("alert alert-"+e).text(r).fadeIn(1e3).delay(2e3).fadeOut(1e3)},t=function(e){var t="",n="";switch(e.status){case"success":n="success",t="Success. Данные успешно отправлены!";break;case"error":n="error",t=e.reason;break;case"progress":n="progress",t="Данные обрабатываются. Повтор через "+e.timeout+" секунд!";break;default:n="error",t="Ошибка структуры данных! Обратитесь к системному администратору!"}r(n,t)};if(void 0!==this.formCurrent){var n=7;this.validate().isValid&&($("#submitButton").addClass("pure-button-disabled"),function o(a){var s=["error.json","progress.json","success.json"],i=$("#"+e.formCurrent.id),u=i.attr("action")+s[Math.floor(Math.random()*s.length)];return $.ajax({url:u,type:"get",dataType:"json",data:i.serialize()}).done(function(e){t(e),"progress"===e.status?++a<=n&&setTimeout(function(){return o(a)},1e3*parseInt(e.timeout)):$("#submitButton").removeClass("pure-button-disabled")}).fail(function(){r("error","Ошибка получения данных!"),$("#submitButton").removeClass("pure-button-disabled")})}(1))}}}]),e}();$(function(){$("#resultContainer").hide(),window.MyForm=new LoginForm("myForm");var e={fio:"Петров Иван Васильевич",email:"petr@ya.ru",phone:"+7(111)222-33-11",qwe:"111"};MyForm.setData(e),$("#submitButton").click(function(e){e.preventDefault(),MyForm.submit()})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkxvZ2luRm9ybSIsImZvcm1OYW1lIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsImZvcm1DdXJyZW50IiwiZG9jdW1lbnQiLCJmb3JtcyIsImZvcm1EYXRhIiwiY291bnRGb3JtRWxlbWVudHMiLCJlbGVtZW50cyIsImxlbmd0aCIsImkiLCJlbGVtZW50Q3VycmVudCIsIm5vZGVOYW1lIiwidG9VcHBlckNhc2UiLCJuYW1lIiwiJCIsInRyaW0iLCJ2YWx1ZSIsImluaXREYXRhIiwiZmllbGRzQ2hlY2siLCJfdHlwZW9mIiwiaXNFbXB0eU9iamVjdCIsInNldERhdGEiLCJTZXQiLCJrZXlEYXRhIiwiaGFzT3duUHJvcGVydHkiLCJoYXMiLCJfdGhpcyIsIlNob3dFcnJvciIsImNvbnRhaW5lciIsImVycm9yTWVzc2FnZSIsImlkIiwiYWRkQ2xhc3MiLCJhZnRlciIsImlzVmFsaWQiLCJlcnJvckZpZWxkcyIsInB1c2giLCJpZEZvcm0iLCJmaW5kIiwicmVtb3ZlIiwicmVtb3ZlQ2xhc3MiLCJyZXNldEVycm9yIiwiZmlvIiwic3BsaXQiLCJ0ZXN0IiwiZmlvQ2hlY2siLCJlbWFpbCIsImVtYWlsQ2hlY2siLCJwaG9uZSIsIm1hdGNoIiwicmVkdWNlIiwic3VtIiwiY3VycmVudCIsInBob25lQ2hlY2siLCJfdGhpczIiLCJzaG93TWVzc2FnZSIsInR5cGVNZXNzYWdlIiwidGV4dE1lc3NhZ2UiLCJ0ZXh0IiwiZmFkZUluIiwiZGVsYXkiLCJmYWRlT3V0Iiwic3dpdGNoTWVzc2FnZSIsImRhdGEiLCJzdGF0dXNNc2ciLCJkYXRhU3RhdHVzIiwic3RhdHVzIiwicmVhc29uIiwidGltZW91dCIsIm1heENvdW50IiwidmFsaWRhdGUiLCJnZXRTZXJ2aWNlIiwiY291bnQiLCJqc29uRmlsZW5hbWUiLCJhY3Rpb25VcmwiLCJhdHRyIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiYWpheCIsInVybCIsInR5cGUiLCJkYXRhVHlwZSIsInNlcmlhbGl6ZSIsImRvbmUiLCJzZXRUaW1lb3V0IiwicGFyc2VJbnQiLCJmYWlsIiwiaGlkZSIsIndpbmRvdyIsIk15Rm9ybSIsImluaXRPYmoiLCJxd2UiLCJjbGljayIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInN1Ym1pdCJdLCJtYXBwaW5ncyI6IitrQkFDTUEscUJBRUYsU0FBQUEsRUFBWUMsR0FBVUMsZ0JBQUFDLEtBQUFILEdBQ2xCRyxLQUFLQyxZQUFjQyxTQUFTQyxNQUFNTCwwREFNbEMsSUFBSU0sS0FFSixRQUFnQyxJQUFyQkosS0FBS0MsWUFLWixJQUFLLElBSENJLEVBQW9CTCxLQUFLQyxZQUFZSyxTQUFTQyxPQUczQ0MsRUFBSSxFQUFHQSxFQUFJSCxFQUFtQkcsSUFBSyxDQUN4QyxJQUFJQyxFQUFpQlQsS0FBS0MsWUFBWUssU0FBU0UsR0FFRCxVQUExQ0MsRUFBZUMsU0FBU0MsZ0JBRXhCUCxFQUFTSyxFQUFlRyxNQUFRQyxFQUFFQyxLQUFLTCxFQUFlTSxRQUtsRSxPQUFPWCxrQ0FJSFksR0FFSixJQUFNQyxHQUFlLE1BQU8sUUFBUyxTQUVyQyxRQUFnQyxJQUFyQmpCLEtBQUtDLGFBSVEsaUJBQXBCLElBQU9lLEVBQVAsWUFBQUUsUUFBT0YsTUFBMEJILEVBQUVNLGNBQWNILEdBQVcsQ0FDNUQsSUFBSUksRUFBVSxJQUFJQyxJQUFJSixHQUV0QixJQUFLLElBQUlLLEtBQVdOLEVBRVhBLEVBQVNPLGVBQWVELElBR3pCRixFQUFRSSxJQUFJRixLQUNadEIsS0FBS0MsWUFBWUssU0FBU2dCLEdBQVNQLE1BQVFDLEVBQVNNLHdDQU96RCxJQUFBRyxFQUFBekIsS0FFUCxRQUFnQyxJQUFyQkEsS0FBS0MsWUFBaEIsQ0FLQSxJQUFJeUIsRUFBWSxTQUFDQyxFQUFXQyxHQUN4QmYsRUFBRSxJQUFNYyxFQUFVRSxJQUFJQyxTQUFTLFNBQVNDLE1BQXhDLHFEQUFtR0gsRUFBbkcsV0FDQUksR0FBVSxFQUNWQyxFQUFZQyxLQUFLUCxFQUFVZixPQTZFM0JvQixHQUFVLEVBQ1ZDLEtB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OEUsTUFBTSxTQUFDQyxHQUV0QkEsRUFBRUMsaUJBQ0ZMLE9BQU9NIiwiZmlsZSI6ImluZGV4Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8v0J7RgdC90L7QstC90L7QuSDQutC70LDRgdGBINC00LvRjyDRgNCw0LHQvtGC0Ysg0YEg0YTQvtGA0LzQvtC5XHJcbmNsYXNzIExvZ2luRm9ybSB7XHJcbiAgICAvL9C60L7QvdGB0YLRgNGD0LrRgtC+0YAg0L/QvtC70YPRh9Cw0LXRgiDQuNC80Y8g0YTQvtGA0LzRiyDQuCDRgdC+0YXRgNCw0L3Rj9C10YIg0LXRkSDQstC+INCy0L3Rg9GC0YDQtdC90L3QtdC5INC/0LXRgNC10LzQtdC90L3QvtC5XHJcbiAgICBjb25zdHJ1Y3Rvcihmb3JtTmFtZSkge1xyXG4gICAgICAgIHRoaXMuZm9ybUN1cnJlbnQgPSBkb2N1bWVudC5mb3Jtc1tmb3JtTmFtZV07XHJcbiAgICB9XHJcblxyXG4gICAgLy/RhNGD0L3QutGG0LjRjyDQstC+0LfQstGA0LDRidCw0LXRgiDQvtCx0YrQtdC60YIg0YEg0LTQsNC90L3Ri9C80Lgg0YTQvtGA0LzRi1xyXG4gICAgZ2V0RGF0YSgpIHtcclxuICAgICAgICAvL9C40L3QuNGG0LjQsNC70LjQt9Cw0YbQuNGPINC00LDQvdC90YvRhSDRhNC+0YDQvNGLXHJcbiAgICAgICAgbGV0IGZvcm1EYXRhID0ge307XHJcbiAgICAgICAgLy/Qv9GA0L7QstC10YDQutCwOiBcItCwINC60L7RgNGA0LXQutGC0L3QviDQu9C4INGD0YHRgtCw0L3QvtCy0LvQtdC90L3QviDQuNC80Y8g0YTQvtGA0LzRiywg0LzQvtC20LXRgiDQv9GA0L7Qs9GA0LDQvNC80LjRgdGCINC+0YjQuNCx0YzRgdGPP1wiXHJcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmZvcm1DdXJyZW50ICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgIC8v0YHRh9C40YLQsNC10Lwg0LrQvtC70LjRh9C10YHRgtCy0L4g0Y3Qu9C10LzQtdC90YLQvtCyINCyINGE0L7RgNC80LVcclxuICAgICAgICAgICAgY29uc3QgY291bnRGb3JtRWxlbWVudHMgPSB0aGlzLmZvcm1DdXJyZW50LmVsZW1lbnRzLmxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgIC8v0L7QsdGF0L7QtNC40Lwg0LrQsNC20LTRi9C5INGN0LvQtdC80LXQvdGCINGE0L7RgNC80YtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudEZvcm1FbGVtZW50czsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZWxlbWVudEN1cnJlbnQgPSB0aGlzLmZvcm1DdXJyZW50LmVsZW1lbnRzW2ldO1xyXG4gICAgICAgICAgICAgICAgLy/Qv9GA0L7QstC10YDRj9C10Lwg0YLQuNC/INGD0LfQu9CwINGE0L7RgNC80YssINGN0YLQviDRgtC+0YfQvdC+IElOUFVUXHJcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudEN1cnJlbnQubm9kZU5hbWUudG9VcHBlckNhc2UoKSA9PT0gJ0lOUFVUJykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8v0YHQvtGF0YDQsNC90Y/QtdC8INCyINC00LDQvdC90YvQtSDQv9C+0LvRjyDQsiDQvtCx0YrQtdC60YJcclxuICAgICAgICAgICAgICAgICAgICBmb3JtRGF0YVtlbGVtZW50Q3VycmVudC5uYW1lXSA9ICQudHJpbShlbGVtZW50Q3VycmVudC52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy/QstC+0LfQstGA0LDRidCw0LXQvCDQvtCx0YrQtdC60YJcclxuICAgICAgICByZXR1cm4gZm9ybURhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgLy/Qv9GA0L7RhtC10LTRg9GA0LAg0L/RgNC40L3QuNC80LDQtdC8INC+0LHRitC10LrRgiDQuCDRg9GB0YLQsNC90LDQstC70LjQstCw0LXQvCDRgdC+0L7RgtCy0LXRgdGC0LLRg9GO0YnQuNC8INC/0L7Qu9GP0Lwg0YTQvtGA0LzRi1xyXG4gICAgc2V0RGF0YShpbml0RGF0YSkge1xyXG4gICAgICAgIC8v0YHQv9C40YHQvtC6INC/0L7Qu9C10Lkg0LTQu9GPINC/0YDQvtCy0LXRgNC60LhcclxuICAgICAgICBjb25zdCBmaWVsZHNDaGVjayA9IFtcImZpb1wiLCBcImVtYWlsXCIsIFwicGhvbmVcIl07XHJcbiAgICAgICAgLy/RgtC+0YfQvdC+INC30LDQtNCw0L3QviDQuNC80Y8g0YTQvtGA0LzRiyDQutC+0YDRgNC10LrRgtC90L4/XHJcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmZvcm1DdXJyZW50ID09PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy/RgtC+INGH0YLQviDQvdCw0Lwg0L/QtdGA0LXQtNCw0LvQuCDRjdGC0L4g0L7QsdGK0LXQutGCPyDQsCDQvNC+0LbQtdGCINC+0L0g0L/Rg9GB0YLQvtC5P1xyXG4gICAgICAgIGlmICh0eXBlb2YgaW5pdERhdGEgPT09IFwib2JqZWN0XCIgJiYgISQuaXNFbXB0eU9iamVjdChpbml0RGF0YSkpIHtcclxuICAgICAgICAgICAgbGV0IHNldERhdGEgPSBuZXcgU2V0KGZpZWxkc0NoZWNrKTtcclxuICAgICAgICAgICAgLy/Qv9GA0L7QstC10YDRj9C10Lwg0L/RgNC40L3Rj9GC0L7QtSDQv9C+0LvQtSDRgdC+0LTQtdGA0LbQuNGC0YHRjyDQsiDQvNC90L7QttC10YHRgtCy0LUg0L/QvtC70LXQuSDQtNC70Y8g0YPRgdGC0LDQvdC+0LLQutC4XHJcbiAgICAgICAgICAgIGZvciAobGV0IGtleURhdGEgaW4gaW5pdERhdGEpIHtcclxuICAgICAgICAgICAgICAgIC8v0LAg0LLQtNGA0YPQsyDQv9GA0L7Qs9GA0LDQvNC80LjRgdGCINGA0LXRiNC40Lsg0YPQvdCw0YHQu9C10LTQvtCy0LDRgtGMINC+0LHRitC10LrRgiDRh9C10LPQvi3RgtC+INC90LXQv9C+0L3Rj9GC0L3QvtCz0L4sINC/0YDQvtC/0YPRgdC60LDQtdC8INC/0L7Qu9GPINGA0L7QtNC40YLQtdC70Y9cclxuICAgICAgICAgICAgICAgIGlmICghaW5pdERhdGEuaGFzT3duUHJvcGVydHkoa2V5RGF0YSkpXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAvL9GD0YHRgtCw0L3QsNCy0LvQuNCy0LDQtdC8INC/0L7Qu9GPINGE0L7RgNC80Ysg0LIg0YHQvtC+0YLQstC10YHRgtCy0LjQuCDRgSDQv9C10YDQtdC00LDQvdC90YvQvCDQvtCx0YrQtdC60YLQvtC8XHJcbiAgICAgICAgICAgICAgICBpZiAoc2V0RGF0YS5oYXMoa2V5RGF0YSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1DdXJyZW50LmVsZW1lbnRzW2tleURhdGFdLnZhbHVlID0gaW5pdERhdGFba2V5RGF0YV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy/Qv9GA0L7RhtC10LTRg9GA0LAg0LTQu9GPINCy0LDQu9C40LTQsNGG0LjQuCDRhNC+0YDQvNGLXHJcbiAgICB2YWxpZGF0ZSgpIHtcclxuICAgICAgICAvL9C40LzRjyDRhNC+0YDQvNGLINC/0LXRgNC10LTQsNC90L3QviDQutC+0YDRgNC10LrRgtC90L4/XHJcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmZvcm1DdXJyZW50ID09PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8v0L/QvtC60LDQt9GL0LLQsNC10Lwg0YHQvtC+0LHRidC10L3QuNC1INC+0LEg0L7RiNC40LHQutC1LCDRg9GB0YLQsNC90LDQstC70LjQstCw0LXQvCDRhNC70LDQsyDQuCDQtNC+0LHQsNCy0LvRj9C10Lwg0LIg0YHQv9C40YHQvtC6INC/0L7Qu9C10Lkg0L3QtSDQv9GA0L7RiNC10LTRiNC40YUg0LLQsNC70LjQtNCw0YbQuNGOXHJcbiAgICAgICAgbGV0IFNob3dFcnJvciA9IChjb250YWluZXIsIGVycm9yTWVzc2FnZSkgPT4ge1xyXG4gICAgICAgICAgICAkKFwiI1wiICsgY29udGFpbmVyLmlkKS5hZGRDbGFzcygnZXJyb3InKS5hZnRlcihgPHNwYW4gY2xhc3M9XCJwdXJlLWZvcm0tbWVzc2FnZS1pbmxpbmUgdGV4dC1lcnJvclwiPiR7ZXJyb3JNZXNzYWdlfTwvc3Bhbj5gKTtcclxuICAgICAgICAgICAgaXNWYWxpZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBlcnJvckZpZWxkcy5wdXNoKGNvbnRhaW5lci5uYW1lKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvL9GB0LHRgNCw0YHRi9Cy0LDQtdC8INC/0YDQvtGI0LvRi9C1INC+0YjQuNCx0LrQuFxyXG4gICAgICAgIGxldCByZXNldEVycm9yID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBpZEZvcm0gPSAkKFwiI1wiICsgdGhpcy5mb3JtQ3VycmVudC5pZCk7XHJcbiAgICAgICAgICAgIC8v0YPQtNCw0LvRj9C10Lwg0LLRgdC1INGB0L7QvtCx0YnQtdC90LjRjyDQvtCxINC+0YjQuNCx0LrQsNGFXHJcbiAgICAgICAgICAgIGlkRm9ybS5maW5kKFwiLnRleHQtZXJyb3IgXCIpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAvL9GD0LTQsNC70Y/QtdC8INC+0LHQstC+0LrRgyDQstC+0LrRgNGD0LMg0L/QvtC70LXQuSDRhNC+0YDQvNGLXHJcbiAgICAgICAgICAgIGlkRm9ybS5maW5kKFwiLmVycm9yXCIpLnJlbW92ZUNsYXNzKFwiZXJyb3JcIik7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy/Qv9GA0L7QstC10YDRj9C10Lwg0KTQmNCeXHJcbiAgICAgICAgbGV0IGZpb0NoZWNrID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgZmlvID0gdGhpcy5mb3JtQ3VycmVudC5lbGVtZW50cy5maW87XHJcbiAgICAgICAgICAgIC8v0LzQvtC20LXRgiDQpNCY0J4g0L/Rg9GB0YLQvtC1P1xyXG4gICAgICAgICAgICBpZiAoIWZpby52YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgU2hvd0Vycm9yKGZpbywgJ9Ct0YLQviDQv9C+0LvQtSDQtNC+0LvQttC90L4g0LHRi9GC0Ywg0LfQsNC/0L7Qu9C10L3QvdC+IScpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8v0LzQvtC20LXRgiDQpNCY0J4g0YHQvtC00LXRgNC20LjRgiDQvdC1IDMg0YHQu9C+0LLQsD9cclxuICAgICAgICAgICAgaWYgKCQudHJpbShmaW8udmFsdWUpLnNwbGl0KFwiIFwiKS5sZW5ndGggIT09IDMpIHtcclxuICAgICAgICAgICAgICAgIFNob3dFcnJvcihmaW8sICfQpNCY0J4g0LTQvtC70LbQvdC+INCx0YvRgtGMINGA0L7QstC90L4gMyDRgdC70L7QstCwIScpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8v0JzQvtC20LXRgiDQpNCY0J4g0L3QtSDQvdCwINGA0YPRgdGB0LrQvtC8P1xyXG4gICAgICAgICAgICAvL9C/0YDQvtGB0YLQsNGPINGA0LXQs9GD0LvRj9GA0LrQsFxyXG4gICAgICAgICAgICBsZXQgYWxwaGFSZWdleCA9IC9eW9CQLdGP0ZHQgSBdKyQvaTtcclxuICAgICAgICAgICAgaWYgKCFhbHBoYVJlZ2V4LnRlc3QoZmlvLnZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgU2hvd0Vycm9yKGZpbywgJ9CSINCk0JjQniDQtNC+0L/Rg9GB0LrQsNGO0YLRgdGPINGC0L7Qu9GM0LrQviDRgNGD0YHRgdC60LjQtSDQsdGD0LrQstGLIScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy/Qv9GA0L7QstC10YDRj9C10LwgZW1haWxcclxuICAgICAgICBsZXQgZW1haWxDaGVjayA9ICgpID0+IHtcclxuICAgICAgICAgICAgbGV0IGVtYWlsID0gdGhpcy5mb3JtQ3VycmVudC5lbGVtZW50cy5lbWFpbDtcclxuICAgICAgICAgICAgLy9lbWFpbCDQvdC1INC/0YPRgdGC0L7QuT9cclxuICAgICAgICAgICAgaWYgKCFlbWFpbC52YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgU2hvd0Vycm9yKGVtYWlsLCAn0K3RgtC+INC/0L7Qu9C1INC00L7Qu9C20L3QviDQsdGL0YLRjCDQt9Cw0L/QvtC70LXQvdC90L4hJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy9lbWFpbCDRgtC+0YfQvdC+INC40Lcg0LTQvtC80LXQvdCwINCv0L3QtNC10LrRgdCwP1xyXG4gICAgICAgICAgICAvL9C40L3RgtC10YDQtdGB0L3QsNGPINGA0LXQs9GD0LvRj9GA0LrQsFxyXG4gICAgICAgICAgICBsZXQgZW1haWxSZWdleCA9IC9eKFtcXHdcXC5fXSspQCh5YS5ydXx5YW5kZXgucnV8eWFuZGV4LnVhfHlhbmRleC5ieXx5YW5kZXgua3p8eWFuZGV4LmNvbSkkL2k7XHJcbiAgICAgICAgICAgIGlmICghZW1haWxSZWdleC50ZXN0KGVtYWlsLnZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgU2hvd0Vycm9yKGVtYWlsLCAnRW1haWwg0LTQvtC70LbQtdC9INCx0YvRgtGMINC40Lcg0LTQvtC80LXQvdCwINCv0L3QtNC10LrRgdCwIScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy/Qv9GA0L7QstC10YDRj9C10Lwg0YLQtdC70LXRhNC+0L3QvdGL0Lkg0L3QvtC80LXRgFxyXG4gICAgICAgIGxldCBwaG9uZUNoZWNrID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAvL9C80LDQutGB0LjQvNCw0LvRjNC90LDRjyDRgdGD0LzQvNCwINGG0LjRhNGAINCyINC90L7QvNC10YDQtSDRgtC10LvQtdGE0L7QvdCwXHJcbiAgICAgICAgICAgIGNvbnN0IG1heFN1bSA9IDMwO1xyXG5cclxuICAgICAgICAgICAgbGV0IHBob25lID0gdGhpcy5mb3JtQ3VycmVudC5lbGVtZW50cy5waG9uZTtcclxuICAgICAgICAgICAgLy/RgtC10LvQtdGE0L7QvSDQvdC1INC/0YPRgdGC0L7QuT9cclxuICAgICAgICAgICAgaWYgKCFwaG9uZS52YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgU2hvd0Vycm9yKHBob25lLCAn0K3RgtC+INC/0L7Qu9C1INC00L7Qu9C20L3QviDQsdGL0YLRjCDQt9Cw0L/QvtC70LXQvdC90L4hJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy/RgtC10LvQtdGE0L7QvSDRgtC+0YfQvdC+INC/0L7Qv9Cw0LTQsNC10YIg0L/QvtC0INC90YPQttC90YPRjiDQvNCw0YHQutGDP1xyXG4gICAgICAgICAgICAvL9C30LDQvdC40LzQsNGC0LXQu9GM0L3QsNGPINGA0LXQs9GD0LvRj9GA0LrQsFxyXG4gICAgICAgICAgICBsZXQgcGhvbmVSZWdleCA9IC9eXFwrN1xcKFxcZHszfVxcKVxcZHszfS1cXGR7Mn0tXFxkezJ9JC9pO1xyXG4gICAgICAgICAgICBpZiAoIXBob25lUmVnZXgudGVzdChwaG9uZS52YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgIFNob3dFcnJvcihwaG9uZSwgJ9Ck0L7RgNC80LDRgiDRgtC10LvQtdGE0L7QvdCwICs3KFhYWClYWFgtWFgtWFghJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy/RhdC40YLRgNCw0Y8g0YHRgtGA0L7Rh9C60LAgLSDRgdC90LDRh9Cw0LvQsCDRg9Cx0LjRgNCw0LXQvCDQstGB0LUg0YHQuNC80LLQvtC70YssINC60YDQvtC80LUg0YbQuNGE0YAsINC90LDQtCDQv9C+0LvRg9GH0LjQstGI0LjQudGB0Y8g0LzQsNGB0YHQuNCy0L7QvCDQu9C40YLQtdGA0LDQu9C+0LIsXHJcbiAgICAgICAgICAgIC8vINC/0YDQvtCy0L7QtNC40Lwg0YHQstGR0YDRgdGC0LrRgyDQtNC70Y8g0YHRg9C80LzQuNGA0L7QstCw0L3QuNGPLCDQv9GA0Lgg0YfRkdC8INC/0YDQtdC+0LHRgNCw0LfRg9C10Lwg0LfQvdCw0Log0LIg0YbQuNGE0YDRgyDQv9GA0Lgg0L/QvtC80L7RidC4ICtjdXJyZW50XHJcbiAgICAgICAgICAgIGxldCByZXN1bHRTdW0gPSBwaG9uZS52YWx1ZS5tYXRjaCgvXFxkL2cpLnJlZHVjZSgoc3VtLCBjdXJyZW50KSA9PiBzdW0gKyArY3VycmVudCwgMCk7XHJcbiAgICAgICAgICAgIC8v0YHRg9C80LzQsCDRhtC40YTRgCDQvNC10L3RjNGI0LUg0LrQvtC90YHRgtCw0L3RgtGLP1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0U3VtID4gbWF4U3VtKSB7XHJcbiAgICAgICAgICAgICAgICBTaG93RXJyb3IocGhvbmUsIGDQodGD0LzQvNCwINGG0LjRhNGAINGC0LXQu9C10YTQvtC90LAg0L/RgNC10LLRi9GI0LDQtdGCICR7bWF4U3VtfWApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGxldCBpc1ZhbGlkID0gdHJ1ZTtcclxuICAgICAgICBsZXQgZXJyb3JGaWVsZHMgPSBbXTtcclxuXHJcbiAgICAgICAgcmVzZXRFcnJvcigpO1xyXG5cclxuICAgICAgICBmaW9DaGVjaygpO1xyXG4gICAgICAgIGVtYWlsQ2hlY2soKTtcclxuICAgICAgICBwaG9uZUNoZWNrKCk7XHJcblxyXG4gICAgICAgIC8v0LLQvtC30LLRgNCw0YnQsNC10Lwg0L7QsdGK0LXQutGCXHJcbiAgICAgICAgcmV0dXJuIHtpc1ZhbGlkLCBlcnJvckZpZWxkc31cclxuICAgIH1cclxuXHJcbiAgICAvL9C/0YDQvtGG0LXQtNGD0YDQsCDQvtGC0L/RgNCw0LLQutC4INC00LDQvdC90YvRhSDRhNC+0YDQvNGLINC/0L4gYWpheFxyXG4gICAgc3VibWl0KCkge1xyXG4gICAgICAgIC8v0L/QvtC60LDQt9GL0LLQsNC10Lwg0YHQvtC+0LHRidC10L3QuNC1INC+INGA0LXQt9GD0LvRjNGC0LDRgtCw0YUg0L7RgtC/0YDQsNCy0LrQuFxyXG4gICAgICAgIGxldCBzaG93TWVzc2FnZSA9ICh0eXBlTWVzc2FnZSwgdGV4dE1lc3NhZ2UpID0+IHtcclxuICAgICAgICAgICAgLy/RhdC40YLRgNCw0Y8g0YHRgtGA0L7Rh9C60LBcclxuICAgICAgICAgICAgLy/RgyDQutC+0L3RgtC10LnQvdC10YDQsCDRg9C00LDQu9GP0LXQvCDQstGB0LUg0LrQu9Cw0YHRgdGLLCDQtNC+0LHQsNCy0LvRj9C10Lwg0L3QvtCy0YvQtSDQuCDQvdGD0LbQvdGL0Lwg0YLQuNC/0L7QvCAo0L7RiNC40LHQutCwLCDRg9GB0L/QtdGI0L3Qviwg0L/RgNC+0LPRgNC10YHRgSlcclxuICAgICAgICAgICAgLy/Qv9C+0YHRgtC10L/QtdC90L3QviDQv9C+0LrQsNC30YvQstCw0LXQvCDRgdC+0L7QsdGJ0LXQvdC40LUsINC30LDQtNC10YDQttC60LAgMiDRgdC10LrRg9C90LTRiywg0L/QvtGB0YLQtdC/0LXQvdC90L4g0LPQsNGB0LjQvCDRgdC+0L7QsdGJ0LXQvdC40LVcclxuICAgICAgICAgICAgLy/QstC+0YIg0LvRjtCx0LvRjiBKYXZhc2NyaXB0INC30LAg0YLQsNC60LjQtSBcItC/0LDRgNC+0LLQvtC30YtcIiA6LSlcclxuICAgICAgICAgICAgJCgnI3Jlc3VsdENvbnRhaW5lcicpLnJlbW92ZUNsYXNzKCkuYWRkQ2xhc3MoJ2FsZXJ0IGFsZXJ0LScgKyB0eXBlTWVzc2FnZSkudGV4dCh0ZXh0TWVzc2FnZSkuZmFkZUluKDEwMDApLmRlbGF5KDIwMDApLmZhZGVPdXQoMTAwMCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy/Qv9GA0L7RhtC10LTRg9GA0LAg0YPRgdGC0LDQvdC+0LLQutC4INC30L3QsNGH0LXQvdC40Lkg0LrQu9Cw0YHRgdCwINC4INGB0L7QvtCx0YnQtdC90LjRjyDQtNC70Y8g0L7RgtC+0LHRgNCw0LbQtdC90LjRj1xyXG4gICAgICAgIGxldCBzd2l0Y2hNZXNzYWdlID0gKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgbGV0IHN0YXR1c01zZyA9ICcnO1xyXG4gICAgICAgICAgICBsZXQgZGF0YVN0YXR1cyA9ICcnO1xyXG5cclxuICAgICAgICAgICAgc3dpdGNoIChkYXRhLnN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInN1Y2Nlc3NcIjpcclxuICAgICAgICAgICAgICAgICAgICBkYXRhU3RhdHVzID0gXCJzdWNjZXNzXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzTXNnID0gXCJTdWNjZXNzLiDQlNCw0L3QvdGL0LUg0YPRgdC/0LXRiNC90L4g0L7RgtC/0YDQsNCy0LvQtdC90YshXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiZXJyb3JcIjpcclxuICAgICAgICAgICAgICAgICAgICBkYXRhU3RhdHVzID0gXCJlcnJvclwiO1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1c01zZyA9IGRhdGEucmVhc29uO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInByb2dyZXNzXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVN0YXR1cyA9IFwicHJvZ3Jlc3NcIjtcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXNNc2cgPSBg0JTQsNC90L3Ri9C1INC+0LHRgNCw0LHQsNGC0YvQstCw0Y7RgtGB0Y8uINCf0L7QstGC0L7RgCDRh9C10YDQtdC3ICR7ZGF0YS50aW1lb3V0fSDRgdC10LrRg9C90LQhYDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVN0YXR1cyA9IFwiZXJyb3JcIjtcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXNNc2cgPSAn0J7RiNC40LHQutCwINGB0YLRgNGD0LrRgtGD0YDRiyDQtNCw0L3QvdGL0YUhINCe0LHRgNCw0YLQuNGC0LXRgdGMINC6INGB0LjRgdGC0LXQvNC90L7QvNGDINCw0LTQvNC40L3QuNGB0YLRgNCw0YLQvtGA0YMhJztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2hvd01lc3NhZ2UoZGF0YVN0YXR1cywgc3RhdHVzTXNnKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvL9C+0YLQv9GA0LDQstC60LAg0LTQsNC90L3Ri9GFINGE0L7RgNC80Ysg0YfQtdGA0LXQtyBhamF4XHJcbiAgICAgICAgbGV0IGdldFNlcnZpY2UgPSAoY291bnQpID0+IHtcclxuICAgICAgICAgICAgLy/RgdC/0LjRgdC+0Log0YTQsNC50LvQvtCyINC+0YLQstC10YLQvtCyXHJcbiAgICAgICAgICAgIGNvbnN0IGpzb25GaWxlbmFtZSA9IFtcImVycm9yLmpzb25cIiwgXCJwcm9ncmVzcy5qc29uXCIsIFwic3VjY2Vzcy5qc29uXCJdO1xyXG4gICAgICAgICAgICBjb25zdCBpZEZvcm0gPSAkKFwiI1wiICsgdGhpcy5mb3JtQ3VycmVudC5pZCk7XHJcbiAgICAgICAgICAgIC8vdXJsINC+0YLQstC10YLQsCDQstGL0LHQuNGA0LDQtdC8INGB0LvRg9GH0LDQudC90L5cclxuICAgICAgICAgICAgbGV0IGFjdGlvblVybCA9IGlkRm9ybS5hdHRyKCdhY3Rpb24nKSArIGpzb25GaWxlbmFtZVtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBqc29uRmlsZW5hbWUubGVuZ3RoKV07XHJcblxyXG4gICAgICAgICAgICAvL9C70Y7QsdC40LzRi9C5IGFqYXhcclxuICAgICAgICAgICAgcmV0dXJuICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICB1cmw6IGFjdGlvblVybCxcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdnZXQnLFxyXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICAgICAgICAgIC8v0LTQsNC90L3Ri9C1INGE0L7RgNC80Ysg0YHQtdGA0LjQsNC70LjQt9GD0LXQvCDQtNC70Y8g0L7RgtC/0YDQsNCy0LrQuFxyXG4gICAgICAgICAgICAgICAgZGF0YTogaWRGb3JtLnNlcmlhbGl6ZSgpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAvL2FqYXgg0LfQsNCy0LXRgNGI0LjQu9GB0Y8g0YXQvtGA0L7RiNC+XHJcbiAgICAgICAgICAgICAgICAuZG9uZSgoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8v0L/QuNGI0LXQvCDRgdC+0L7QsdGJ0LXQvdC40LVcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2hNZXNzYWdlKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8v0LAg0LzQvtC20LXRgiDQtNCw0L3QvdGL0LUg0LXRidGRINC90LUg0L7QsdGA0LDQsdC+0YLQsNC90Ys/XHJcbiAgICAgICAgICAgICAgICAgICAgLy/RgdGO0YDQv9GA0LjQtyEg0LXRgdC70Lgg0YHRgtCw0YLRg9GBID0g0L/RgNC+0LPRgNC10YHRgSwg0L/RgNC+0YbQtdGB0YEg0L/QvtCy0YLQvtGA0Y/QtdGCINGB0LDQvCDRgdC10LHRjyDQv9C+INC40L3RgtC10YDQstCw0LvRgywg0YIu0LUuINGA0LXQutGD0YDRgdC40Y8sINGF0L7RgNC+0YjQvixcclxuICAgICAgICAgICAgICAgICAgICAvLyDRh9GC0L4g0LHQtdC3INC80L3QvtC20LXRgdGC0LLQtdC90L3QvtCz0L4g0LLQtdGC0LLQu9C10L3QuNGPXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuc3RhdHVzID09PSBcInByb2dyZXNzXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy/QsiDQotCXINGH0LXRgtC60L4g0L3QtSDRg9C60LDQt9Cw0L3QviDQutC+0LvQuNGH0LXRgdGC0LLQviDQv9C+0L/Ri9GC0L7QuiDQt9Cw0L/RgNC+0YHQvtCyINC6INGB0LXRgNCy0LXRgNGDXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8v0LAg0L3QsNC/0LjRgdCw0L3QviwgXCLQu9C+0LPQuNC60LAg0LTQvtC70LbQvdCwINC/0L7QstGC0L7RgNGP0YLRjNGB0Y8sINC/0L7QutCwINCyINC+0YLQstC10YLQtSDQvdC1INCy0LXRgNC90LXRgtGB0Y8g0L7RgtC70LjRh9C90YvQuSDQvtGCIHByb2dyZXNzINGB0YLQsNGC0YPRgVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8v0LAg0L3QtSDQstC10YDQvdGR0YLRjNGB0Y8g0LTRgNGD0LPQvtC5INGB0YLQsNGC0YPRgT8g0JHQtdGB0LrQvtC90LXRh9C90LDRjyDRgNC10LrRg9GA0YHQuNGPP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL9C30LAg0Y3RgtC+LCDRgtC+0LPQviDQutGC0L4g0L/QuNGB0LDQuyDQotCXLCDQvdCw0LTQviDQsdC40YLRjCDQttC10LvQtdC30L3QvtC5INC70LjQvdC10LnQutC+0Lkg0L/QviDQv9Cw0LvRjNGG0LDQvC4gOi0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8v0LLQvtC+0LHRidC10Lwg0YDQtdC60YPRgNGB0LjRjyDQvdC1INCx0L7Qu9C10LUgbWF4Q291bnQg0YDQsNC3XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgrK2NvdW50IDw9IG1heENvdW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL9C30LDQv9GD0YHQutCw0LXQvCDQvdC+0LLRi9C5INGG0LjQutC7INGA0LXQutGD0YDRgdC40Lgg0L/QviDRgtCw0LnQvNCw0YPRgtCwLCDQutC+0YLQvtGA0YvQuSDQv9GA0LjRiNGR0Lsg0YEg0YHQtdGA0LLQtdGA0LBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gZ2V0U2VydmljZShjb3VudCksIHBhcnNlSW50KGRhdGEudGltZW91dCkgKiAxMDAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8v0LLQutC70Y7Rh9Cw0LXQvCDQvtGC0LrQu9GO0YfQtdC90L3Rg9GOINC60L3QvtC/0LrRg1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKFwiI3N1Ym1pdEJ1dHRvblwiKS5yZW1vdmVDbGFzcygncHVyZS1idXR0b24tZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLy9hamF4INC30LDQstC10YDRiNC40LvRgdGPINC/0LvQvtGF0L5cclxuICAgICAgICAgICAgICAgIC5mYWlsKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBzaG93TWVzc2FnZShcImVycm9yXCIsIFwi0J7RiNC40LHQutCwINC/0L7Qu9GD0YfQtdC90LjRjyDQtNCw0L3QvdGL0YUhXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoXCIjc3VibWl0QnV0dG9uXCIpLnJlbW92ZUNsYXNzKCdwdXJlLWJ1dHRvbi1kaXNhYmxlZCcpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy/RhNC+0YDQvNCwINC+0L/RgNC10LTQtdC70LXQvdCwP1xyXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5mb3JtQ3VycmVudCA9PT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL9C60L7Qu9C40YfQtdGB0YLQstC+INC/0L7Qv9GL0YLQvtC6INC/0L7Qu9GD0YfQuNGC0Ywg0LTQsNC90L3Ri9C1INGBINGB0LXRgNCy0LXRgNCwLCDQvtCz0YDQsNC90LjRh9C10L3QuNC1INGA0LXQutGD0YDRgdC40LhcclxuICAgICAgICBjb25zdCBtYXhDb3VudCA9IDc7XHJcbiAgICAgICAgLy/QvdCw0YfQsNC70YzQvdC+0LUg0LrQvtC70LjRh9C10YHRgtCy0L4g0L/QvtC/0YvRgtC+0Log0L/QvtC70YPRh9C10L3QuNGPINC00LDQvdC90YvRhSDRgSDRgdC10YDQstC10YDQsFxyXG4gICAgICAgIGxldCBjb3VudCA9IDE7XHJcblxyXG4gICAgICAgIC8v0L/RgNC+0LLQvtC00LjQvCDQstCw0LvQuNC00LDRhtC40Y5cclxuICAgICAgICBsZXQgcmVzdWx0VmFsaWRhdGUgPSB0aGlzLnZhbGlkYXRlKCk7XHJcbiAgICAgICAgLy/QstCw0LvQuNC00LDRhtC40Y8g0L/RgNC+0YjQu9CwINGF0L7RgNC+0YjQvj9cclxuICAgICAgICBpZiAocmVzdWx0VmFsaWRhdGUuaXNWYWxpZCkge1xyXG4gICAgICAgICAgICAvL9C+0YLQutC70Y7Rh9Cw0LXQvCDQutC90L7Qv9C60YMg0L7RgtC/0YDQsNCy0LrQuFxyXG4gICAgICAgICAgICAkKFwiI3N1Ym1pdEJ1dHRvblwiKS5hZGRDbGFzcygncHVyZS1idXR0b24tZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgLy/QvdCw0YfQuNC90LDQtdC8INGA0LXQutGD0YDRgdC40Y5cclxuICAgICAgICAgICAgZ2V0U2VydmljZShjb3VudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIC8v0L/RgNGP0YfQtdC8INC60L7QvdGC0LXQudC90LXRgCDRgSDRgdC+0L7QsdGJ0LDQvdC40Y/QvNC4XHJcbiAgICAkKCcjcmVzdWx0Q29udGFpbmVyJykuaGlkZSgpO1xyXG5cclxuICAgIC8v0YHQvtC30LTQsNC10Lwg0L7QsdGK0LXQutGCINC90YPQttC90L7Qs9C+INC60LvQsNGB0YHQsCDQuCDQtNC10LvQsNC10Lwg0LXQs9C+INCz0LvQvtCx0LDQu9GM0L3Ri9C8XHJcbiAgICB3aW5kb3cuTXlGb3JtID0gbmV3IExvZ2luRm9ybShcIm15Rm9ybVwiKTtcclxuICAgIC8vIGNvbnNvbGUubG9nKE15Rm9ybS5nZXREYXRhKCkpO1xyXG5cclxuICAgIC8v0YPRgdGC0LDQvdCw0LLQu9C40LLQsNC10Lwg0L7QsdGK0LXQutGCINGBINC90L7QstGL0LzQuCDQtNCw0L3QvdGL0LzQuFxyXG4gICAgbGV0IGluaXRPYmogPSB7XHJcbiAgICAgICAgZmlvOiAn0J/QtdGC0YDQvtCyINCY0LLQsNC9INCS0LDRgdC40LvRjNC10LLQuNGHJyxcclxuICAgICAgICBlbWFpbDogJ3BldHJAeWEucnUnLFxyXG4gICAgICAgIHBob25lOiAnKzcoMTExKTIyMi0zMy0xMScsXHJcbiAgICAgICAgcXdlOiAnMTExJ1xyXG4gICAgfTtcclxuICAgIE15Rm9ybS5zZXREYXRhKGluaXRPYmopO1xyXG4gICAgLy8gY29uc29sZS5sb2coTXlGb3JtLmdldERhdGEoKSk7XHJcblxyXG4gICAgLy/QvtCx0YDQsNCx0L7RgtC60LAg0L3QsNC20LDRgtC40Y8g0L3QsCDQutC90L7Qv9C60YNcclxuICAgICQoJyNzdWJtaXRCdXR0b24nKS5jbGljaygoZSkgPT4ge1xyXG4gICAgICAgIC8v0L7RgtC80LXQvdCwINC00LXQudGB0YLQstC40Y8g0L/QviDRg9C80L7Qu9GH0LDQvdC40Y5cclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgTXlGb3JtLnN1Ym1pdCgpO1xyXG4gICAgfSlcclxufSk7XHJcbiJdfQ==
